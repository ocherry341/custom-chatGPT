<div class="header">{{chatTitle}}</div>

<div class="chat-list">
  <div class="chat-item"
    *ngFor="let msg of chatMessages$|async;odd as odd;index as i"
    [ngClass]="{bot:odd}">
    <markdown clipboard [data]="msg.content"></markdown>
    <div *ngIf="i===savedIndex" class="saved">
      <i class="icon icon-save"></i>
    </div>
  </div>

  <div *ngIf="chatService.generating" class="chat-item bot loading">
    <d-icon [icon]="'icon-loading'" [rotate]="'infinite'">
      <span iconSuffix>加载中</span>
    </d-icon>
  </div>

  <div *ngIf="chatService.haveError" class="chat-item bot error">
    <d-icon [icon]="'icon-error-o'" [color]="'rgb(249, 95, 91)'"></d-icon>
    <div>{{chatService.errMessage}}</div>
  </div>

</div>